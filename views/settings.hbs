<h2 class="h3 mb-4 page-title d-none">{{translations.setting.pageTitle}}</h2>
<div class="my-4">

  <!-- Tab content -->
  <div class="tab-content" id="myTabContent">
          <!-- Profile Tab -->
          <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
            <!-- User Info Form -->
            <form id="user-info-form" class="settings-form shadow-0">
              
              <!-- Profile Picture Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-person-circle me-2 text-primary"></i>
                    {{translations.setting.profilePicture}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.setting.profilePictureDescription}}
                  </p>
                </div>
                
                <div class="row">
                  <div class="col-12">
                    <div id="profileSection" data-user-id="{{userData._id}}" class="profile-picture-container">
                      <div class="profile-picture-wrapper">
                        <img id="profileImage" src="/img/avatar.png" alt="Profile Picture" class="profile-image">
                        <div class="profile-picture-overlay">
                          <i class="bi bi-camera-fill"></i>
                          <span>{{translations.setting.changePhoto}}</span>
                        </div>
                      </div>
                      
                      <!-- Image Moderation Warning -->
                      <div class="alert alert-warning mt-3" role="alert" id="imageModerationFlagged" style="display: none;">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        {{translations.setting.imageModerationFlagged}}
                      </div>
                    </div>
                    
                    <div class="mb-3 mt-3" id="thumbnailInputContainer" style="display: none;">
                      <input type="file" class="form-control" id="profileImageInput" name="profileImageInput" accept="image/*">
                    </div>
                  </div>
                </div>
              </div>
              <!-- Personal Information Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-person-lines-fill me-2 text-primary"></i>
                    {{translations.setting.personalInformation}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.setting.personalInformationDescription}}
                  </p>
                </div>

                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating">
                      <input type="text" id="nickname" class="form-control" placeholder="{{translations.setting.nickname}}" />
                      <label for="nickname">
                        <i class="bi bi-person me-1"></i>
                        {{translations.setting.nickname}}
                      </label>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-floating">
                      <input type="email" class="form-control" id="inputEmail4" placeholder="{{translations.setting.email}}" />
                      <label for="inputEmail4">
                        <i class="bi bi-envelope me-1"></i>
                        {{translations.setting.email}}
                      </label>
                    </div>
                  </div>

                  <!-- Age Range Display -->
                  <div class="col-md-6" id="ageRangeSection" style="display: none;">
                    <div class="form-control h-auto py-3 bg-light">
                      <div class="d-flex align-items-center">
                        <i class="bi bi-calendar-range me-2 text-muted"></i>
                        <div>
                          <small class="text-muted d-block">{{translations.setting.ageRange}}</small>
                          <span class="fw-semibold" id="userAgeRange"></span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-floating">
                      <select class="form-select" id="gender" name="gender">
                        <option value="female" selected>{{translations.setting.female}}</option>
                        <option value="male">{{translations.setting.male}}</option>
                      </select>
                      <label for="gender">
                        <i class="bi bi-gender-ambiguous me-1"></i>
                        {{translations.setting.gender}}
                      </label>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="settings-field">
                      <label class="form-label mb-2">
                        <i class="bi bi-globe2 me-1"></i>
                        {{translations.setting.language}}
                      </label>
                      <div class="dropdown w-100">
                        <button data-user-lang="{{user.lang}}" class="btn btn-outline-secondary dropdown-toggle w-100 text-start" type="button" id="languageDropdownMenu" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="bi bi-globe2 me-2"></i>
                          <span class="language-text">{{translations.setting.selectLanguage}}</span>
                        </button>
                        <ul class="dropdown-menu w-100" aria-labelledby="languageDropdownMenu">
                          <li><a class="dropdown-item language-select" href="#" data-lang="ja">
                            <i class="bi bi-flag me-2"></i>{{translations.setting.japanese}}
                          </a></li>
                          <li><a class="dropdown-item language-select" href="#" data-lang="en">
                            <i class="bi bi-flag me-2"></i>{{translations.setting.english}}
                          </a></li>
                          <li><a class="dropdown-item language-select" href="#" data-lang="fr">
                            <i class="bi bi-flag me-2"></i>{{translations.setting.french}}
                          </a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Content Preferences Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-sliders me-2 text-primary"></i>
                    {{translations.setting.contentPreferences}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.setting.contentPreferencesDescription}}
                  </p>
                </div>

                <!-- NSFW Toggle -->
                <div class="settings-preference-item">
                  <div class="d-flex align-items-start justify-content-between">
                    <div class="preference-info">
                      <div class="preference-title">
                        <i class="bi bi-eye me-2"></i>
                        {{translations.setting.showNSFW}}
                        <i class="bi bi-crown-fill premium-icon ms-1 text-warning" id="nsfw-premium-icon" style="display: none;"></i>
                      </div>
                      <div class="preference-description text-muted">
                        {{translations.setting.showNSFWDescription}}
                      </div>
                      <div id="nsfw-premium-indicator" class="premium-feature-indicator mt-2" style="display: none;">
                        <small class="text-warning d-flex align-items-center">
                          <i class="bi bi-star-fill me-1"></i> 
                          Premium feature required to view adult content
                        </small>
                      </div>
                    </div>
                    <div class="preference-control">
                      <label class="settings-switch">
                        <input type="checkbox" id="nsfw-toggle">
                        <span class="settings-switch-slider"></span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <!-- About You Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-chat-quote me-2 text-primary"></i>
                    {{translations.setting.aboutYou}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.setting.aboutYouDescription}}
                  </p>
                </div>

                <div class="form-floating">
                  <textarea class="form-control bio-textarea" id="bio" name="bio" rows="8" maxlength="400" placeholder="{{translations.setting.bioPlaceholder}}"></textarea>
                  <label for="bio">
                    <i class="bi bi-chat-quote me-1"></i>
                    {{translations.setting.bio}}
                  </label>
                  <div class="form-text mt-2">
                    <div class="d-flex justify-content-between">
                      <span>{{translations.setting.bioHint}}</span>
                      <span class="character-count text-muted">
                        <span id="bio-char-count">0</span>/400
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              {{#if isAdmin}}
              <!-- Advanced Settings Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-gear me-2 text-primary"></i>
                    {{translations.setting.advancedSettings}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.setting.advancedSettingsDescription}}
                  </p>
                </div>
                
                <div class="advanced-setting-card">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="advanced-setting-info">
                      <div class="advanced-setting-title">
                        <i class="bi bi-arrow-clockwise me-2"></i>
                        {{translations.restartOnboarding}}
                      </div>
                      <div class="advanced-setting-description text-muted">
                        {{translations.restartOnboardingDesc}}
                      </div>
                    </div>
                    <button type="button" id="restart-onboarding" class="btn btn-outline-primary btn-sm">
                      <i class="bi bi-arrow-clockwise me-1"></i> 
                      {{translations.restart}}
                    </button>
                  </div>
                </div>
              </div>
              {{/if}}

            </form>
          </div>

          <!-- Connections Tab -->
          <div class="tab-pane fade" id="connections" role="tabpanel" aria-labelledby="connections-tab">
            <div class="settings-form shadow-0">
              <!-- SNS Connections Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-share me-2 text-primary"></i>
                    {{translations.sns.connected_accounts}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.sns.connections_description}}
                  </p>
                </div>

                <!-- Account Limit Info -->
                <div class="account-limit-info mb-3 p-3 rounded" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(130, 64, 255, 0.2);">
                  <div class="d-flex align-items-center justify-content-between">
                    <div>
                      <i class="bi bi-info-circle me-2"></i>
                      <span id="connectionLimitText">{{translations.sns.loading}}</span>
                    </div>
                    <span class="badge bg-primary" id="connectionCountBadge">0/1</span>
                  </div>
                </div>

                <!-- Connected Accounts List -->
                <div id="connectedAccountsList" class="connected-accounts-list mb-4">
                  <div class="text-center p-4">
                    <div class="spinner-border spinner-border-sm text-primary" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                    <div class="mt-2 text-muted small">{{translations.sns.loading_connections}}</div>
                  </div>
                </div>

                <!-- Connect New Account Section -->
                <div class="connect-new-section">
                  <h6 class="mb-3">
                    <i class="bi bi-plus-circle me-2"></i>{{translations.sns.connect_new_account}}
                  </h6>
                  
                  <!-- Platform Options -->
                  <div class="platform-options d-flex flex-wrap gap-3">
                    <!-- Instagram -->
                    <button type="button" class="btn btn-outline-secondary platform-connect-btn d-flex align-items-center gap-2" 
                            data-platform="instagram" id="connectInstagramBtn">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                      </svg>
                      <span>Instagram</span>
                    </button>

                    <!-- X (Twitter) -->
                    <button type="button" class="btn btn-outline-secondary platform-connect-btn d-flex align-items-center gap-2" 
                            data-platform="twitter" id="connectTwitterBtn">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                      </svg>
                      <span>X (Twitter)</span>
                    </button>
                  </div>

                  <!-- Premium Upsell -->
                  <div class="premium-upsell mt-3 p-3 rounded is-free-user" id="connectionPremiumUpsell" style="display: none; background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1)); border: 1px solid rgba(255, 193, 7, 0.3);">
                    <div class="d-flex align-items-center gap-2">
                      <i class="bi bi-crown-fill text-warning"></i>
                      <div>
                        <strong>{{translations.sns.premium_accounts}}</strong>
                        <p class="mb-0 small text-muted">{{translations.sns.premium_description}}</p>
                      </div>
                      <button type="button" class="btn btn-warning btn-sm ms-auto" onclick="loadPlanPage()">
                        {{translations.sns.upgrade}}
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Recent Posts Section -->
              <div class="settings-section">
                <div class="settings-section-header mb-4">
                  <h5 class="settings-section-title mb-1">
                    <i class="bi bi-clock-history me-2 text-primary"></i>
                    {{translations.sns.recent_posts}}
                  </h5>
                  <p class="settings-section-subtitle text-muted mb-0">
                    {{translations.sns.recent_posts_description}}
                  </p>
                </div>

                <div id="recentPostsList" class="recent-posts-list">
                  <div class="text-center p-4 text-muted">
                    <i class="bi bi-inbox fs-1 mb-2"></i>
                    <p class="mb-0">{{translations.sns.no_posts_yet}}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Password Tab -->
          <div class="tab-pane fade" id="password" role="tabpanel" aria-labelledby="password-tab">
            <h6>{{translations.setting.password}}</h6>
            <form id="user-password-form">
              <div class="row mb-4">
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="inputPassword4">{{translations.setting.oldPassword}}</label>
                    <input type="password" class="form-control" id="inputPassword4" />
                  </div>
                  <div class="form-group">
                    <label for="inputPassword5">{{translations.setting.newPassword}}</label>
                    <input type="password" class="form-control" id="inputPassword5" />
                  </div>
                  <div class="form-group">
                    <label for="inputPassword6">{{translations.setting.confirmPassword}}</label>
                    <input type="password" class="form-control" id="inputPassword6" />
                  </div>
                </div>
                <div class="col-md-6">
                  <p class="mb-2">{{translations.setting.requirements}}</p>
                  <p class="small text-muted mb-2">{{translations.setting.requirementsDescription}}</p>
                  <ul class="small text-muted pl-4 mb-0">
                    <li>{{translations.setting.minLength}}</li>
                    <li>{{translations.setting.specialChar}}</li>
                    <li>{{translations.setting.number}}</li>
                    <li>{{translations.setting.differentPassword}}</li>
                  </ul>
                </div>
              </div>
              <button type="submit" class="btn btn-secondary">{{translations.setting.changePassword}}</button>
            </form>
          </div>

          <!-- Subscription Tab -->
          <div class="tab-pane fade" id="subscription" role="tabpanel" aria-labelledby="subscription-tab">
            <div class="settings-form shadow-0">
              <p id="user-plan" style="display: none;"></p>
              
              <!-- No Subscription - Premium Features Section -->
              <div id="no-subscription-section" class="subscription-promo-section">
                <div class="subscription-promo-header text-center">
                  <div class="promo-icon-wrapper">
                    <i class="bi bi-stars"></i>
                  </div>
                  <h4 class="promo-title">{{translations.subscriptionFeatures.title}}</h4>
                  <p class="promo-subtitle">{{translations.subscriptionFeatures.subtitle}}</p>
                </div>
                
                <div class="premium-features-list">
                  <div class="premium-feature-item">
                    <div class="feature-icon">
                      <i class="bi bi-infinity"></i>
                    </div>
                    <div class="feature-content">
                      <h6 class="feature-title">{{translations.subscriptionFeatures.feature1_title}}</h6>
                      <p class="feature-desc">{{translations.subscriptionFeatures.feature1_desc}}</p>
                    </div>
                  </div>
                  
                  <div class="premium-feature-item">
                    <div class="feature-icon">
                      <i class="bi bi-image-fill"></i>
                    </div>
                    <div class="feature-content">
                      <h6 class="feature-title">{{translations.subscriptionFeatures.feature2_title}}</h6>
                      <p class="feature-desc">{{translations.subscriptionFeatures.feature2_desc}}</p>
                    </div>
                  </div>
                  
                  <div class="premium-feature-item">
                    <div class="feature-icon">
                      <i class="bi bi-camera-video-fill"></i>
                    </div>
                    <div class="feature-content">
                      <h6 class="feature-title">{{translations.subscriptionFeatures.feature3_title}}</h6>
                      <p class="feature-desc">{{translations.subscriptionFeatures.feature3_desc}}</p>
                    </div>
                  </div>
                  
                  <div class="premium-feature-item">
                    <div class="feature-icon">
                      <i class="bi bi-fire"></i>
                    </div>
                    <div class="feature-content">
                      <h6 class="feature-title">{{translations.subscriptionFeatures.feature4_title}}</h6>
                      <p class="feature-desc">{{translations.subscriptionFeatures.feature4_desc}}</p>
                    </div>
                  </div>
                  
                  <div class="premium-feature-item">
                    <div class="feature-icon">
                      <i class="bi bi-person-hearts"></i>
                    </div>
                    <div class="feature-content">
                      <h6 class="feature-title">{{translations.subscriptionFeatures.feature5_title}}</h6>
                      <p class="feature-desc">{{translations.subscriptionFeatures.feature5_desc}}</p>
                    </div>
                  </div>
                  
                  <div class="premium-feature-item">
                    <div class="feature-icon">
                      <i class="bi bi-lightning-charge-fill"></i>
                    </div>
                    <div class="feature-content">
                      <h6 class="feature-title">{{translations.subscriptionFeatures.feature6_title}}</h6>
                      <p class="feature-desc">{{translations.subscriptionFeatures.feature6_desc}}</p>
                    </div>
                  </div>
                </div>
                
                <div class="subscription-cta-section">
                  <button class="btn subscription-cta-btn" onclick="loadPlanPage()">
                    <i class="bi bi-crown-fill me-2"></i>
                    {{translations.subscriptionFeatures.cta_button}}
                  </button>
                  <p class="cta-note">{{translations.subscriptionFeatures.cta_note}}</p>
                </div>
              </div>
              <!-- End No Subscription Section -->
              
              <!-- Active Subscription Section -->
              <div id="active-subscription-section" style="display: none;">
                <div class="settings-section">
                  <div class="settings-section-header mb-4">
                    <h5 class="settings-section-title mb-1">
                      <i class="bi bi-crown-fill me-2 text-warning"></i>
                      {{translations.subscriptionFeatures.active_title}}
                    </h5>
                    <p class="settings-section-subtitle text-muted mb-0">
                      {{translations.subscriptionFeatures.active_subtitle}}
                    </p>
                  </div>
                  
                  <div class="active-plan-card">
                    <div class="plan-badge">
                      <i class="bi bi-patch-check-fill"></i>
                      <span id="active-plan-name">Premium</span>
                    </div>
                    <div class="plan-details">
                      <div class="plan-detail-item">
                        <span class="detail-label">{{translations.subscriptionFeatures.started}}</span>
                        <span class="detail-value" id="subscription-start-date">-</span>
                      </div>
                      <div class="plan-detail-item">
                        <span class="detail-label">{{translations.subscriptionFeatures.renews}}</span>
                        <span class="detail-value" id="subscription-renewal-date">-</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <button id="cancel-plan" class="btn btn-outline-danger btn-sm rounded-pill" style="display: none;position: absolute; bottom: 20px;font-size: 10px;opacity: 0.5;" data-user-id="{{user._id}}">{{translations.setting.cancelSubscription}}</button>
            
              <!-- Day Pass Countdown Section -->
              <div id="day-pass-countdown-section" class="text-center p-3 border rounded shadow-sm mt-3" style="display: none;">
                <h4 class="mb-3"><i class="bi bi-clock-history me-2"></i>{{translations.setting.dayPassActiveTitle}}</h4>
                <p class="lead">{{translations.setting.dayPassExpiresIn}}</p>
                <div id="countdown-timer" class="display-4 fw-bold text-primary mb-3">
                  <span id="hours">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
                </div>
                <p id="day-pass-expired-message" class="text-danger mt-2" style="display: none;">
                  {{translations.setting.dayPassExpired}} <br>
                  <button class="btn custom-gradient-bg mt-2" onclick="loadPlanPage()">{{translations.select_plan_here}}</button>
                </p>
              </div>
              <!-- End Day Pass Countdown Section -->
            </div>
          </div>

          <!-- Usage Tab -->
          <div class="tab-pane fade" id="usage" role="tabpanel" aria-labelledby="usage-tab">
            <h6>{{translations.setting.usage}}</h6>
            <div id="user-limit"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
/* Compact Native App Style Settings */
.settings-form {
  border-radius: 0;
  padding: 0;
  box-shadow: none;
  background: transparent;
}

.settings-section {
  margin-bottom: 24px;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.settings-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.settings-section-header {
  padding-bottom: 0;
  margin-bottom: 12px;
}

.settings-section-title {
  font-weight: 600;
  color: rgba(255, 255, 255, 0.95);
  font-size: 15px;
  margin-bottom: 4px;
  letter-spacing: -0.1px;
}

.settings-section-title i {
  margin-right: 8px;
  font-size: 16px;
}

.settings-section-subtitle {
  font-size: 13px;
  line-height: 1.4;
  color: rgba(255, 255, 255, 0.75);
  margin-top: 4px;
}

.settings-divider {
  display: none;
}

.profile-picture-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 16px;
}

.profile-picture-wrapper {
  position: relative;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 3px solid #f0f0f0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.profile-picture-wrapper:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
}

.profile-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: top;
}

.profile-picture-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  opacity: 0;
  transition: opacity 0.2s ease;
  font-size: 12px;
}

.profile-picture-wrapper:hover .profile-picture-overlay {
  opacity: 1;
}

.profile-picture-overlay i {
  font-size: 20px;
  margin-bottom: 4px;
}

.settings-preference-item {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 12px 16px;
  border: 1px solid rgba(130, 64, 255, 0.2);
}

.preference-title {
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 4px;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.preference-description {
  font-size: 12px;
  line-height: 1.4;
  color: rgba(255, 255, 255, 0.75);
  margin-top: 2px;
}

.settings-switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 26px;
  flex-shrink: 0;
}

.settings-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.settings-switch-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #d1d5db;
  transition: .2s;
  border-radius: 26px;
}

.settings-switch-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: .2s;
  border-radius: 50%;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

.settings-switch input:checked + .settings-switch-slider {
  background-color: #6E20F4;
}

.settings-switch input:checked + .settings-switch-slider:before {
  transform: translateX(18px);
}

.settings-switch.disabled {
  opacity: 0.5;
  pointer-events: none;
}

.bio-textarea {
  resize: vertical;
  min-height: 100px;
  font-size: 14px;
  border-radius: 10px;
}

.character-count {
  font-size: 12px;
}

.advanced-setting-card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  padding: 12px 16px;
  border: 1px solid rgba(130, 64, 255, 0.2);
}

.advanced-setting-title {
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 4px;
  font-size: 14px;
}

.advanced-setting-description {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.75);
}

.settings-form-actions {
  padding-top: 16px;
  border-top: 1px solid rgba(0, 0, 0, 0.08);
  margin-top: 20px;
}

.premium-feature-indicator {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 12px;
}

/* Form Elements - Compact */
.form-floating {
  margin-bottom: 16px;
}

.form-floating > label {
  font-size: 14px;
  padding: 0.75rem 0.75rem;
  color: rgba(255, 255, 255, 0.8);
}

.form-floating > .form-control,
.form-floating > .form-select {
  font-size: 14px;
  padding: 0.75rem 0.75rem;
  height: calc(3rem + 2px);
  border-radius: 10px;
  border: 1px solid rgba(130, 64, 255, 0.2);
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
}

/* Form-select specific styling for dropdown arrow and appearance */
.form-floating > .form-select {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 16px 12px;
  padding-right: 2.5rem;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

.form-floating > .form-select:focus {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23D2B8FF' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
}

/* Ensure options have proper styling */
.form-floating > .form-select option {
  background: #2d2d2d;
  color: rgba(255, 255, 255, 0.9);
  padding: 0.5rem;
}

.form-floating > .form-control:focus,
.form-floating > .form-select:focus {
  border-color: #6E20F4;
  box-shadow: 0 0 0 3px rgba(110, 32, 244, 0.2);
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
}

.row.g-3 {
  --bs-gutter-y: 0.75rem;
  --bs-gutter-x: 0.75rem;
}

/* Ensure text-muted elements have better contrast in settings modal */
#settingsModal .text-muted,
.settings-modal .text-muted,
.settings-form .text-muted {
  color: rgba(255, 255, 255, 0.7) !important;
}

/* Form labels in settings */
.settings-form .form-label,
.settings-form label {
  color: rgba(255, 255, 255, 0.85) !important;
}

@media (max-width: 768px) {
  .settings-form {
    padding: 0;
  }
  
  .profile-picture-wrapper {
    width: 90px;
    height: 90px;
  }
  
  .settings-section-title {
    font-size: 14px;
  }
  
  .settings-section {
    margin-bottom: 20px;
    padding-bottom: 16px;
  }
}

/* SNS Connections Styles */
.connected-accounts-list .connected-account-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  border: 1px solid rgba(130, 64, 255, 0.2);
  margin-bottom: 10px;
  transition: all 0.2s ease;
}

.connected-accounts-list .connected-account-item:hover {
  background: rgba(255, 255, 255, 0.08);
}

.connected-account-item .account-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.connected-account-item .account-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  background: rgba(255, 255, 255, 0.1);
}

.connected-account-item .account-details {
  display: flex;
  flex-direction: column;
}

.connected-account-item .account-username {
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
}

.connected-account-item .account-platform {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.6);
  display: flex;
  align-items: center;
  gap: 4px;
}

.connected-account-item .disconnect-btn {
  color: #dc3545;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.connected-account-item .disconnect-btn:hover {
  opacity: 1;
}

.platform-connect-btn {
  padding: 12px 20px;
  border-radius: 10px;
  transition: all 0.2s ease;
  border: 1px solid rgba(130, 64, 255, 0.3);
}

.platform-connect-btn:hover {
  background: rgba(130, 64, 255, 0.1);
  border-color: rgba(130, 64, 255, 0.5);
  transform: translateY(-1px);
}

.platform-connect-btn.connected {
  background: rgba(40, 167, 69, 0.1);
  border-color: rgba(40, 167, 69, 0.3);
  color: #28a745;
}

.platform-connect-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Recent Posts Styles */
.recent-posts-list {
  max-height: 400px;
  overflow-y: auto;
}

.recent-post-item {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  margin-bottom: 10px;
  transition: background 0.2s;
}

.recent-post-item:hover {
  background: rgba(255, 255, 255, 0.08);
}

.recent-post-item .post-thumbnail {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
  background: rgba(0, 0, 0, 0.2);
}

.recent-post-item .post-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.recent-post-item .post-details {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.recent-post-item .post-text {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.85);
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  line-height: 1.4;
}

.recent-post-item .post-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.5);
  flex-wrap: wrap;
}

.recent-post-item .post-platforms {
  display: flex;
  gap: 4px;
  align-items: center;
}

.recent-post-item .platform-badge {
  display: inline-flex;
  align-items: center;
  color: rgba(255, 255, 255, 0.7);
}

.recent-post-item .post-time {
  display: flex;
  align-items: center;
}

.recent-post-item .badge {
  font-size: 10px;
  padding: 2px 6px;
}

/* SNS Post Modal Styles */
#snsPostModal .modal-body {
  background: var(--bg-secondary);
}

#snsPostModal .sns-platform-checkbox {
  display: none;
}

#snsPostModal .sns-platform-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border-radius: 8px;
  background: rgba(30, 30, 30, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  outline: none;
}

#snsPostModal .sns-platform-btn:hover {
  background: rgba(40, 40, 40, 0.9);
  border-color: rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.9);
}

#snsPostModal .sns-platform-btn.active {
  background: linear-gradient(135deg, rgba(138, 43, 226, 0.3) 0%, rgba(75, 0, 130, 0.3) 100%);
  border-color: #8A2BE2;
  color: #fff;
  box-shadow: 0 0 15px rgba(138, 43, 226, 0.4), inset 0 0 20px rgba(138, 43, 226, 0.1);
  transform: translateY(-1px);
}

#snsPostModal .sns-platform-btn.active:hover {
  background: linear-gradient(135deg, rgba(138, 43, 226, 0.4) 0%, rgba(75, 0, 130, 0.4) 100%);
  box-shadow: 0 0 20px rgba(138, 43, 226, 0.5), inset 0 0 25px rgba(138, 43, 226, 0.15);
}

#snsPostModal .caption-style-btn.active {
  background: rgba(110, 32, 244, 0.2);
  border-color: #6E20F4;
  color: #fff;
}

#snsPostModal textarea {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(130, 64, 255, 0.2);
  color: rgba(255, 255, 255, 0.9);
  resize: vertical;
  min-height: 180px;
}

#snsPostModal textarea:focus {
  background: rgba(255, 255, 255, 0.1);
  border-color: #6E20F4;
  box-shadow: 0 0 0 3px rgba(110, 32, 244, 0.2);
  color: rgba(255, 255, 255, 0.9);
}

#snsPostModal textarea::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

/* Subscription Promo Section Styles */
.subscription-promo-section {
  padding: 0;
}

.subscription-promo-header {
  margin-bottom: 24px;
}

.promo-icon-wrapper {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: linear-gradient(135deg, #8B5CF6 0%, #6E20F4 50%, #A855F7 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
  box-shadow: 0 8px 24px rgba(110, 32, 244, 0.35);
}

.promo-icon-wrapper i {
  font-size: 28px;
  color: white;
}

.promo-title {
  font-size: 20px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.95);
  margin-bottom: 8px;
  letter-spacing: -0.3px;
}

.promo-subtitle {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  margin: 0;
  max-width: 320px;
  margin: 0 auto;
  line-height: 1.5;
}

.premium-features-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 24px;
}

.premium-feature-item {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 12px;
  border: 1px solid rgba(130, 64, 255, 0.15);
  transition: all 0.2s ease;
}

.premium-feature-item:hover {
  background: rgba(255, 255, 255, 0.07);
  border-color: rgba(130, 64, 255, 0.3);
  transform: translateX(4px);
}

.feature-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(110, 32, 244, 0.2) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.feature-icon i {
  font-size: 18px;
  color: #A78BFA;
}

.feature-content {
  flex: 1;
  min-width: 0;
}

.feature-title {
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.95);
  margin: 0 0 4px 0;
}

.feature-desc {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.6);
  margin: 0;
  line-height: 1.4;
}

.subscription-cta-section {
  text-align: center;
  padding-top: 8px;
}

.subscription-cta-btn {
  width: 100%;
  padding: 14px 24px;
  font-size: 15px;
  font-weight: 600;
  color: white;
  background: linear-gradient(135deg, #8B5CF6 0%, #6E20F4 50%, #7C3AED 100%);
  border: none;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 16px rgba(110, 32, 244, 0.35);
}

.subscription-cta-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(110, 32, 244, 0.45);
  background: linear-gradient(135deg, #9061F9 0%, #7C3AED 50%, #8B5CF6 100%);
  color: white;
}

.subscription-cta-btn:active {
  transform: translateY(0);
}

.subscription-cta-btn i {
  font-size: 18px;
}

.cta-note {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  margin: 12px 0 0 0;
}

/* Active Subscription Card Styles */
.active-plan-card {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(110, 32, 244, 0.1) 100%);
  border: 1px solid rgba(139, 92, 246, 0.3);
  border-radius: 16px;
  padding: 20px;
}

.plan-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: linear-gradient(135deg, #8B5CF6, #6E20F4);
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 16px;
}

.plan-badge i {
  font-size: 16px;
}

.plan-details {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.plan-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.plan-detail-item:last-child {
  border-bottom: none;
}

.detail-label {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
}

.detail-value {
  font-size: 13px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
}

@media (max-width: 768px) {
  .promo-icon-wrapper {
    width: 56px;
    height: 56px;
  }
  
  .promo-icon-wrapper i {
    font-size: 24px;
  }
  
  .promo-title {
    font-size: 18px;
  }
  
  .premium-feature-item {
    padding: 12px 14px;
  }
  
  .feature-icon {
    width: 36px;
    height: 36px;
  }
  
  .feature-icon i {
    font-size: 16px;
  }
}
</style>

<script>
// Character count for bio
document.addEventListener('DOMContentLoaded', function() {
  const bioTextarea = document.getElementById('bio');
  const charCount = document.getElementById('bio-char-count');
  
  if (bioTextarea && charCount) {
    function updateCharCount() {
      const count = bioTextarea.value.length;
      charCount.textContent = count;
      
      if (count > 350) {
        charCount.style.color = '#dc3545';
      } else if (count > 300) {
        charCount.style.color = '#ffc107';
      } else {
        charCount.style.color = '#6c757d';
      }
    }
    
    bioTextarea.addEventListener('input', updateCharCount);
    updateCharCount(); // Initial count
  }
});
</script>

</body>
</html>
