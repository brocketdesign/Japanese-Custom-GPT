<!DOCTYPE html>
<html lang="ja">
       {{> dashboard-header}}
<body>
    {{> dashboard-nav}}
    <style>

        .custom-gradient-bg {
            background: linear-gradient(90.9deg, #D2B8FF 2.74%, #8240FF 102.92%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: color 0.3s ease-in-out;
        }

        .custom-gradient-bg::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0) 80%);
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.5s ease-in-out;
            z-index: 0;
        }

        .custom-gradient-bg:hover::before {
            transform: translate(-50%, -50%) scale(1);
        }

        .liked i{
          color:red;
        }
        .custom-gradient-bg:hover {
            color: #fff;
        }
        @media (max-width: 600px) {

        }
    </style>
<div class="px-0">

  <div class="swiper-container" style="overflow: hidden;">
    <div class="swiper-wrapper">
      <div class="swiper-slide"><img src="/img/banner1.png" alt="Banner 1" width="100%"></div>
      <div class="swiper-slide"><img src="/img/banner2.png" alt="Banner 2" width="100%"></div>
    </div>
  </div>

  <div class="container">   
      <h3 class="my-4 text-start">{{translations.discover.specialPhotos}}</h3>
      <p>{{translations.discover.aiGravureChatDescription}}</p>
      <div class="container mt-4">
        <div class="row" id="all-chats-images-gallery"></div>
      </div>
      <div class="w-100 text-center">
        <a href="/character" class="my-4 btn btn-lg text-white fw-bold custom-gradient-bg w-100">{{translations.discover.seeAll}}</a>
      </div>

      <h3>{{translations.discover.activeUsers}}</h3>
      <div id="users-gallery" class="d-flex flex-wrap p-3"></div>
      <div class="w-100 text-center d-none">
          <a href="/users/" class="my-4 btn btn-lg text-white fw-bold custom-gradient-bg w-100">{{translations.discover.seeAll}}</a>
      </div>

      <h3 class="my-4 text-start">{{translations.discover.latestAIGravure}}</h3>
      <p>{{translations.discover.latestAIGravureDescription}}</p>
      <div id="chat-gallery" class="row"></div>
      <div class="w-100 text-center">
          <a href="/chat/" class="my-4 btn btn-lg text-white fw-bold custom-gradient-bg w-100">{{translations.discover.seeAll}}</a>
      </div>

      <h3 class="my-4 text-start">{{translations.discover.latestPosts}}</h3>
      <p>{{translations.discover.latestPostsDescription}}</p>
      <div class="row" id="post-gallery"></div>
      <div class="w-100 text-center">
          <a href="/post" class="my-4 btn btn-lg text-white fw-bold custom-gradient-bg w-100">{{translations.discover.seeAll}}</a>
      </div>
  </div>

    

</div>
<style>
  footer{display: inline !important;}
</style>
 {{> dashboard-footer}}

 <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
 <script>
  $(document).ready(function () {
    new Swiper('.swiper-container', {
      loop: true,
      autoplay: true
    });
  });
</script>
<script>
  $(document).ready(function () {
    displayPepopleChat(1);
    loadAllChatImages(1);
    loadAllUserPosts(1)
    loadUsers(1)
    $(document).on('click', '.redirectToChat', function(){
      const chatId = $(this).data('id');
      window.location = `/chat/${chatId}`
    });

  });
</script>
<script>
  $(document).ready(function () {
    return
    const userId = `{{{user._id}}}`;
    $.ajax({
      url: '/api/user-generated-images',
      method: 'GET',
      success: function (data) {
        let galleryHtml = '';
        data.forEach(item => {
          galleryHtml += `
            <div class="col-6 col-md-4 col-lg-3">
              <div class="card">
                <div class="d-flex align-items-center p-2">
                  <a href="/user/${item.userId}">
                    <img src="${item.profilePicture}" alt="${item.userName}" class="rounded-circle me-2" width="40" height="40">
                  </a>
                  <a href="/user/${item.userId}" class="text-decoration-none text-dark">
                    <strong>${item.userName}</strong>
                  </a>
                </div>
                <a href="/chat/${item.chatId}" class="text-muted text-decoration-none">
                    <img src="${item.image.imageUrl}" alt="${item.image.prompt}" class="card-img-top">
                </a>
                <div class="card-body p-2">
                  <a href="/chat/${item.chatId}" class="text-muted text-decoration-none">${item.chatName}</a>
                  <span class="float-end post-fav" data-id="${item.image._id}">
                    <i class="bi bi-heart" style="cursor: pointer;"></i>
                  </span>
                </div>
              </div>
            </div>
          `;
        });
        $('#image-gallery').html(galleryHtml);
      },
      error: function (err) {
        console.error('Failed to load images', err);
      }
    });
  });
</script>


<style>
  .card {
    border: none;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
  }
  
  .card-body {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .card img {
    border-radius: 0 0 10px 10px;
  }

  .rounded-circle {
    object-fit: cover;
  }
</style>
